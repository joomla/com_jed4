document.addEventListener("DOMContentLoaded",(function(){"use strict";var e,t,r,a=document.querySelector(".js-draggable"),o=a.querySelectorAll('[name="order[]"]');if(a)e=a.getAttribute("data-url"),t=a.getAttribute("data-direction"),r=a.getAttribute("data-nested");else if(Joomla.getOptions("draggable-list")){var n=Joomla.getOptions("draggable-list");(a=document.querySelector(n.id)).classList.contains("js-draggable")||a.classList.add("js-draggable"),e=n.url,t=n.direction,r=n.nested}if(a){for(var l=0,d=o.length;d>l;l+=1)o[l].setAttribute("data-order",l+1);document.addEventListener("touchstart",(function(){}),!1);var u=function(e,t){var r,a,o=[],n=[].slice.call(e.querySelectorAll('[name="order[]"]')),l=[].slice.call(e.querySelectorAll('[name="cid[]"]'));for("desc"===t&&(n.reverse(),l.reverse()),r=0,a=n.length;a>r;r+=1)n[r].value=r+1,o.push("order[]=".concat(encodeURIComponent(n[r].value))),o.push("cid[]=".concat(encodeURIComponent(l[r].value)));return o};dragula([a],{direction:"vertical",copy:!1,revertOnSpill:!0,accepts:function(e,t,a,o){return r&&null!==o?o.getAttribute("data-draggable-group")&&o.getAttribute("data-draggable-group")===e.getAttribute("data-draggable-group"):null===o||o&&"tr"===o.tagName.toLowerCase()}}).on("drag",(function(){})).on("cloned",(function(){document.querySelector(".gu-mirror").classList.add("table")})).on("drop",(function(){if(e){var r=document.querySelector('[name="task"]');r&&r.setAttribute("name","some__Temporary__Name__");var o={url:e,method:"POST",data:u(a,t).join("&"),perform:!0};Joomla.request(o),r&&r.setAttribute("name","task")}})).on("dragend",(function(){for(var e=a.querySelectorAll('[name="order[]"]'),t=0,r=e.length;r>t;t+=1)e[t].setAttribute("data-order",t+1)}))}}));